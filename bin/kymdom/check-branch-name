#!/bin/bash

# FUNCTIONS_DEFINITION
RESET="\\033[0m"
YELLOW="\\033[33m"
GREEN="\\033[32m"
RED="\\033[31m"
MAGENTA="\\033[35m"
BOLD="\\e[1m"

BRANCH_NAME=$1

echo "check branch name: \"$1\"";

if [[ ! "$1" =~ ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$ ]]; then
  echo
  echo -e "$RED::error::Branch invalid. Please select a valid branch name. Only lowercases and '-' are allowed.$RESET"
  exit 1
fi

if [[ "$1" =~ ^[a-z0-9]{2}--.* ]]; then
    echo
    echo -e "$RED::error:Branch invalid. Domain name contains an invalid label in a reserved format (R-LDH: '??--')$RESET"
    exit 1
fi

if [ $(echo -e -n $BRANCH_NAME | wc -m) -ge 55 ]; then
  echo
  echo -e "$RED::error:Branch invalid. Must be no more than 55 characters.$RESET"
  exit 1
fi

exit
